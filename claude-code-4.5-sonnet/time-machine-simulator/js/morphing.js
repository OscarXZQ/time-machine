class MorphingUI {\n    constructor() {\n        this.morphTargets = new Map();\n        this.activeMorphs = new Map();\n        this.transitionStates = new Map();\n        this.fluidElements = [];\n        \n        this.init();\n        this.setupMorphTargets();\n        this.bindEvents();\n        this.animate();\n    }\n    \n    init() {\n        this.createMorphingStyles();\n        this.setupFluidMaterial();\n    }\n    \n    createMorphingStyles() {\n        const style = document.createElement('style');\n        style.id = 'morphing-ui-styles';\n        style.textContent = `\n            .morphing-element {\n                transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                transform-style: preserve-3d;\n            }\n            \n            .fluid-element {\n                transition: \n                    border-radius 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55),\n                    transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275),\n                    background 1s ease-in-out,\n                    box-shadow 0.6s ease-out;\n            }\n            \n            .elastic-transform {\n                animation: elasticMorph var(--duration, 2s) cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite alternate;\n            }\n            \n            @keyframes elasticMorph {\n                0% {\n                    transform: scale(1) rotate(0deg) skew(0deg);\n                    border-radius: var(--start-radius, 10px);\n                }\n                25% {\n                    transform: scale(1.05) rotate(2deg) skew(1deg);\n                    border-radius: calc(var(--start-radius, 10px) * 1.5);\n                }\n                50% {\n                    transform: scale(0.98) rotate(-1deg) skew(-0.5deg);\n                    border-radius: calc(var(--start-radius, 10px) * 0.7);\n                }\n                75% {\n                    transform: scale(1.02) rotate(1deg) skew(0.5deg);\n                    border-radius: calc(var(--start-radius, 10px) * 1.2);\n                }\n                100% {\n                    transform: scale(1) rotate(0deg) skew(0deg);\n                    border-radius: var(--end-radius, 20px);\n                }\n            }\n            \n            .liquid-morph {\n                animation: liquidMorph var(--duration, 3s) ease-in-out infinite;\n            }\n            \n            @keyframes liquidMorph {\n                0%, 100% {\n                    border-radius: 10px;\n                    transform: scale(1);\n                }\n                25% {\n                    border-radius: 50% 20% 30% 70%;\n                    transform: scale(1.1) rotateX(5deg);\n                }\n                50% {\n                    border-radius: 30% 70% 50% 20%;\n                    transform: scale(0.9) rotateY(5deg);\n                }\n                75% {\n                    border-radius: 70% 30% 20% 50%;\n                    transform: scale(1.05) rotateZ(2deg);\n                }\n            }\n            \n            .quantum-state {\n                animation: quantumFluctuation 1.5s ease-in-out infinite alternate;\n            }\n            \n            @keyframes quantumFluctuation {\n                0% {\n                    opacity: 0.8;\n                    filter: blur(0px) hue-rotate(0deg);\n                    transform: scale(1) translateZ(0);\n                }\n                33% {\n                    opacity: 0.6;\n                    filter: blur(1px) hue-rotate(60deg);\n                    transform: scale(1.02) translateZ(5px);\n                }\n                66% {\n                    opacity: 0.9;\n                    filter: blur(0.5px) hue-rotate(120deg);\n                    transform: scale(0.98) translateZ(-5px);\n                }\n                100% {\n                    opacity: 1;\n                    filter: blur(0px) hue-rotate(180deg);\n                    transform: scale(1) translateZ(0);\n                }\n            }\n            \n            .temporal-distortion {\n                animation: temporalWave 2s ease-in-out infinite;\n            }\n            \n            @keyframes temporalWave {\n                0%, 100% {\n                    transform: perspective(1000px) rotateX(0deg) rotateY(0deg);\n                    filter: hue-rotate(0deg);\n                }\n                25% {\n                    transform: perspective(1000px) rotateX(5deg) rotateY(2deg);\n                    filter: hue-rotate(30deg);\n                }\n                50% {\n                    transform: perspective(1000px) rotateX(0deg) rotateY(5deg);\n                    filter: hue-rotate(60deg);\n                }\n                75% {\n                    transform: perspective(1000px) rotateX(-3deg) rotateY(-2deg);\n                    filter: hue-rotate(90deg);\n                }\n            }\n            \n            .dimensional-phase {\n                animation: dimensionalShift 4s ease-in-out infinite;\n            }\n            \n            @keyframes dimensionalShift {\n                0% {\n                    transform: translateX(0) scaleX(1);\n                    background-position: 0% 50%;\n                    opacity: 1;\n                }\n                25% {\n                    transform: translateX(10px) scaleX(1.1);\n                    background-position: 25% 50%;\n                    opacity: 0.8;\n                }\n                50% {\n                    transform: translateX(-5px) scaleX(0.9);\n                    background-position: 50% 50%;\n                    opacity: 0.9;\n                }\n                75% {\n                    transform: translateX(15px) scaleX(1.05);\n                    background-position: 75% 50%;\n                    opacity: 0.7;\n                }\n                100% {\n                    transform: translateX(0) scaleX(1);\n                    background-position: 100% 50%;\n                    opacity: 1;\n                }\n            }\n        `;\n        \n        document.head.appendChild(style);\n    }\n    \n    setupFluidMaterial() {\n        // Create a fluid material shader effect using CSS\n        const fluidShader = document.createElement('style');\n        fluidShader.id = 'fluid-shader';\n        fluidShader.textContent = `\n            .fluid-material {\n                background: linear-gradient(45deg, \n                    rgba(0, 255, 255, 0.8), \n                    rgba(255, 0, 255, 0.6), \n                    rgba(255, 255, 0, 0.7)\n                );\n                background-size: 200% 200%;\n                animation: fluidFlow 3s ease-in-out infinite;\n                filter: blur(0.5px) contrast(1.2);\n            }\n            \n            @keyframes fluidFlow {\n                0% { background-position: 0% 50%; }\n                50% { background-position: 100% 50%; }\n                100% { background-position: 0% 50%; }\n            }\n            \n            .viscous-element {\n                transition: all 2s cubic-bezier(0.23, 1, 0.320, 1);\n            }\n            \n            .viscous-element:hover {\n                transform: scale(1.05) rotateZ(2deg);\n                filter: drop-shadow(0 10px 20px rgba(0,255,255,0.4));\n            }\n        `;\n        \n        document.head.appendChild(fluidShader);\n    }\n    \n    setupMorphTargets() {\n        // Define morphing configurations for different elements\n        this.morphTargets.set('.time-machine-container', {\n            idle: {\n                transform: 'scale(1) rotate(0deg)',\n                filter: 'none',\n                borderRadius: '0px'\n            },\n            calibrating: {\n                transform: 'scale(1.02) rotate(0.5deg)',\n                filter: 'brightness(1.1) contrast(1.1)',\n                borderRadius: '5px'\n            },\n            traveling: {\n                transform: 'scale(0.95) rotate(-1deg)',\n                filter: 'blur(2px) hue-rotate(30deg)',\n                borderRadius: '10px'\n            },\n            arrived: {\n                transform: 'scale(1.05) rotate(0deg)',\n                filter: 'brightness(1.2) saturate(1.3)',\n                borderRadius: '8px'\n            }\n        });\n        \n        this.morphTargets.set('.flux-capacitor', {\n            idle: {\n                transform: 'scale(1) rotateX(0deg) rotateY(0deg)',\n                borderRadius: '50%',\n                filter: 'none'\n            },\n            calibrating: {\n                transform: 'scale(1.1) rotateX(10deg) rotateY(5deg)',\n                borderRadius: '40%',\n                filter: 'drop-shadow(0 0 20px rgba(255,215,0,0.8))'\n            },\n            traveling: {\n                transform: 'scale(1.3) rotateX(20deg) rotateY(360deg)',\n                borderRadius: '60% 30% 50% 40%',\n                filter: 'blur(1px) drop-shadow(0 0 40px rgba(0,255,255,1))'\n            },\n            arrived: {\n                transform: 'scale(1.2) rotateX(5deg) rotateY(180deg)',\n                borderRadius: '45%',\n                filter: 'brightness(1.3) drop-shadow(0 0 30px rgba(0,255,0,0.8))'\n            }\n        });\n        \n        this.morphTargets.set('.control-btn', {\n            idle: {\n                transform: 'scale(1) perspective(1000px) rotateX(0deg)',\n                borderRadius: '15px',\n                filter: 'none'\n            },\n            hover: {\n                transform: 'scale(1.05) perspective(1000px) rotateX(-10deg)',\n                borderRadius: '20px',\n                filter: 'brightness(1.2)'\n            },\n            active: {\n                transform: 'scale(0.95) perspective(1000px) rotateX(5deg)',\n                borderRadius: '10px',\n                filter: 'brightness(0.9)'\n            },\n            disabled: {\n                transform: 'scale(0.9) perspective(1000px) rotateX(0deg)',\n                borderRadius: '8px',\n                filter: 'grayscale(1) opacity(0.5)'\n            }\n        });\n    }\n    \n    bindEvents() {\n        // Time machine state events\n        document.addEventListener('travel-start', () => {\n            this.morphToState('.time-machine-container', 'traveling');\n            this.morphToState('.flux-capacitor', 'traveling');\n            this.startFluidTransitions();\n            this.activateQuantumStates();\n        });\n        \n        document.addEventListener('calibrate-start', () => {\n            this.morphToState('.time-machine-container', 'calibrating');\n            this.morphToState('.flux-capacitor', 'calibrating');\n            this.startPrecisionMorphing();\n        });\n        \n        document.addEventListener('arrival-complete', () => {\n            this.morphToState('.time-machine-container', 'arrived');\n            this.morphToState('.flux-capacitor', 'arrived');\n            this.stopAllTransitions();\n            this.celebrationMorph();\n        });\n        \n        // UI interaction events\n        document.querySelectorAll('.control-btn').forEach(btn => {\n            btn.addEventListener('mouseenter', () => {\n                this.morphToState(btn, 'hover');\n                this.createHoverRipple(btn);\n            });\n            \n            btn.addEventListener('mouseleave', () => {\n                this.morphToState(btn, 'idle');\n            });\n            \n            btn.addEventListener('mousedown', () => {\n                this.morphToState(btn, 'active');\n            });\n            \n            btn.addEventListener('mouseup', () => {\n                this.morphToState(btn, 'hover');\n            });\n        });\n        \n        // Dynamic morphing for status panels\n        document.querySelectorAll('.status-item').forEach((item, index) => {\n            this.setupStatusMorphing(item, index);\n        });\n        \n        // Time display morphing\n        this.setupTimeDisplayMorphing();\n        \n        // Preset button morphing\n        document.querySelectorAll('.preset-btn').forEach((btn, index) => {\n            this.setupPresetMorphing(btn, index);\n        });\n    }\n    \n    morphToState(selector, state, duration = 800) {\n        let element;\n        if (typeof selector === 'string') {\n            element = document.querySelector(selector);\n        } else {\n            element = selector;\n        }\n        \n        if (!element) return;\n        \n        const config = this.morphTargets.get(selector) || this.morphTargets.get('.' + element.className.split(' ')[0]);\n        if (!config || !config[state]) return;\n        \n        const targetState = config[state];\n        \n        // Apply morphing with custom easing\n        element.style.transition = `all ${duration}ms cubic-bezier(0.68, -0.55, 0.265, 1.55)`;\n        \n        Object.entries(targetState).forEach(([property, value]) => {\n            element.style[property] = value;\n        });\n        \n        // Track active morph\n        this.activeMorphs.set(element, { state, startTime: Date.now(), duration });\n    }\n    \n    startFluidTransitions() {\n        document.querySelectorAll('.time-display-section, .controls-section').forEach(section => {\n            section.classList.add('liquid-morph');\n            section.style.setProperty('--duration', '2s');\n        });\n    }\n    \n    startPrecisionMorphing() {\n        const container = document.querySelector('.time-machine-container');\n        if (container) {\n            container.classList.add('elastic-transform');\n            container.style.setProperty('--duration', '1.5s');\n            container.style.setProperty('--start-radius', '0px');\n            container.style.setProperty('--end-radius', '10px');\n        }\n    }\n    \n    activateQuantumStates() {\n        document.querySelectorAll('.reading, .status-fill').forEach(element => {\n            element.classList.add('quantum-state');\n        });\n        \n        // Add temporal distortion to timeline\n        const timeline = document.querySelector('.timeline-visualization');\n        if (timeline) {\n            timeline.classList.add('temporal-distortion');\n        }\n    }\n    \n    celebrationMorph() {\n        // Create a celebration morphing sequence\n        const elements = document.querySelectorAll('.time-machine-container > *');\n        \n        elements.forEach((element, index) => {\n            setTimeout(() => {\n                element.style.animation = `celebrationPop 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards`;\n            }, index * 100);\n        });\n        \n        // Define celebration animation\n        const celebrationStyle = document.createElement('style');\n        celebrationStyle.textContent = `\n            @keyframes celebrationPop {\n                0% {\n                    transform: scale(1) rotate(0deg);\n                }\n                50% {\n                    transform: scale(1.15) rotate(5deg);\n                }\n                100% {\n                    transform: scale(1) rotate(0deg);\n                }\n            }\n        `;\n        \n        if (!document.getElementById('celebration-style')) {\n            celebrationStyle.id = 'celebration-style';\n            document.head.appendChild(celebrationStyle);\n        }\n    }\n    \n    stopAllTransitions() {\n        document.querySelectorAll('.liquid-morph, .elastic-transform, .quantum-state, .temporal-distortion').forEach(element => {\n            element.classList.remove('liquid-morph', 'elastic-transform', 'quantum-state', 'temporal-distortion');\n        });\n    }\n    \n    setupStatusMorphing(item, index) {\n        const fill = item.querySelector('.status-fill');\n        if (!fill) return;\n        \n        let lastValue = 0;\n        \n        const observer = new MutationObserver(() => {\n            const currentValue = parseFloat(fill.style.width) || 0;\n            \n            if (Math.abs(currentValue - lastValue) > 5) {\n                // Significant change detected, trigger morphing\n                this.createValueMorph(fill, lastValue, currentValue);\n                lastValue = currentValue;\n            }\n        });\n        \n        observer.observe(fill, { attributes: true, attributeFilter: ['style'] });\n        \n        // Add breathing animation for idle state\n        item.classList.add('fluid-element');\n        item.style.animation = `statusBreathe ${3 + index * 0.5}s ease-in-out infinite alternate`;\n        \n        const breatheStyle = document.createElement('style');\n        breatheStyle.textContent = `\n            @keyframes statusBreathe {\n                0% {\n                    transform: scale(1);\n                    opacity: 0.8;\n                }\n                100% {\n                    transform: scale(1.02);\n                    opacity: 1;\n                }\n            }\n        `;\n        \n        if (!document.getElementById('status-breathe-style')) {\n            breatheStyle.id = 'status-breathe-style';\n            document.head.appendChild(breatheStyle);\n        }\n    }\n    \n    createValueMorph(element, fromValue, toValue) {\n        element.style.transition = 'width 1s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s ease-out';\n        \n        // Bounce effect during transition\n        element.style.transform = 'scaleX(1.1)';\n        \n        setTimeout(() => {\n            element.style.transform = 'scaleX(1)';\n        }, 200);\n        \n        // Color morphing based on value\n        if (toValue > 80) {\n            element.style.background = 'linear-gradient(90deg, #00ff00 0%, #44ff44 100%)';\n        } else if (toValue > 50) {\n            element.style.background = 'linear-gradient(90deg, #ffaa00 0%, #ffdd00 100%)';\n        } else {\n            element.style.background = 'linear-gradient(90deg, #ff4444 0%, #ff6666 100%)';\n        }\n    }\n    \n    setupTimeDisplayMorphing() {\n        document.querySelectorAll('.time-value').forEach(timeDisplay => {\n            timeDisplay.classList.add('morphing-element');\n            \n            const observer = new MutationObserver(() => {\n                // Time changed, create digit morphing effect\n                this.createDigitMorph(timeDisplay);\n            });\n            \n            observer.observe(timeDisplay, { childList: true, characterData: true, subtree: true });\n        });\n    }\n    \n    createDigitMorph(element) {\n        element.style.transform = 'perspective(1000px) rotateX(90deg)';\n        element.style.filter = 'blur(2px)';\n        \n        setTimeout(() => {\n            element.style.transform = 'perspective(1000px) rotateX(0deg)';\n            element.style.filter = 'blur(0px)';\n        }, 150);\n    }\n    \n    setupPresetMorphing(button, index) {\n        button.classList.add('morphing-element');\n        \n        // Add staggered wave animation\n        button.style.animation = `presetWave ${4 + index * 0.3}s ease-in-out infinite`;\n        button.style.animationDelay = `${index * 0.2}s`;\n        \n        const waveStyle = document.createElement('style');\n        waveStyle.textContent = `\n            @keyframes presetWave {\n                0%, 100% {\n                    transform: translateY(0px) scale(1);\n                    box-shadow: 0 5px 15px rgba(255,100,0,0.2);\n                }\n                50% {\n                    transform: translateY(-5px) scale(1.02);\n                    box-shadow: 0 8px 25px rgba(255,100,0,0.4);\n                }\n            }\n        `;\n        \n        if (!document.getElementById('preset-wave-style')) {\n            waveStyle.id = 'preset-wave-style';\n            document.head.appendChild(waveStyle);\n        }\n    }\n    \n    createHoverRipple(element) {\n        const ripple = document.createElement('div');\n        const rect = element.getBoundingClientRect();\n        \n        ripple.style.cssText = `\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 0;\n            height: 0;\n            background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%);\n            border-radius: 50%;\n            transform: translate(-50%, -50%);\n            animation: hoverRippleExpand 0.6s ease-out forwards;\n            pointer-events: none;\n            z-index: 10;\n        `;\n        \n        const rippleStyle = document.createElement('style');\n        rippleStyle.textContent = `\n            @keyframes hoverRippleExpand {\n                0% {\n                    width: 0;\n                    height: 0;\n                    opacity: 1;\n                }\n                100% {\n                    width: 100px;\n                    height: 100px;\n                    opacity: 0;\n                }\n            }\n        `;\n        \n        if (!document.getElementById('hover-ripple-style')) {\n            rippleStyle.id = 'hover-ripple-style';\n            document.head.appendChild(rippleStyle);\n        }\n        \n        element.style.position = 'relative';\n        element.style.overflow = 'hidden';\n        element.appendChild(ripple);\n        \n        setTimeout(() => ripple.remove(), 600);\n    }\n    \n    createDimensionalPhase() {\n        document.querySelectorAll('.time-machine-container > *').forEach(element => {\n            element.classList.add('dimensional-phase');\n            \n            // Set random background for phase effect\n            element.style.backgroundImage = `\n                linear-gradient(45deg, \n                    rgba(0,255,255,0.1) 0%, \n                    rgba(255,0,255,0.1) 50%, \n                    rgba(255,255,0,0.1) 100%\n                )`;\n            element.style.backgroundSize = '200% 200%';\n        });\n        \n        setTimeout(() => {\n            document.querySelectorAll('.dimensional-phase').forEach(element => {\n                element.classList.remove('dimensional-phase');\n                element.style.backgroundImage = '';\n            });\n        }, 4000);\n    }\n    \n    morphToLiquidState(duration = 3000) {\n        document.querySelectorAll('.time-machine-container, .flux-capacitor, .control-btn').forEach(element => {\n            element.classList.add('viscous-element', 'fluid-material');\n        });\n        \n        setTimeout(() => {\n            document.querySelectorAll('.viscous-element, .fluid-material').forEach(element => {\n                element.classList.remove('viscous-element', 'fluid-material');\n            });\n        }, duration);\n    }\n    \n    animate() {\n        // Update active morphs and clean up completed ones\n        for (let [element, morph] of this.activeMorphs) {\n            const elapsed = Date.now() - morph.startTime;\n            \n            if (elapsed >= morph.duration) {\n                this.activeMorphs.delete(element);\n            }\n        }\n        \n        requestAnimationFrame(() => this.animate());\n    }\n}\n\n// Initialize when DOM loads\ndocument.addEventListener('DOMContentLoaded', () => {\n    const morphingUI = new MorphingUI();\n    \n    // Global access for external triggers\n    window.morphingUI = morphingUI;\n    \n    // Additional event bindings for special morphing sequences\n    document.addEventListener('dimensional-shift', () => {\n        morphingUI.createDimensionalPhase();\n    });\n    \n    document.addEventListener('liquid-state', () => {\n        morphingUI.morphToLiquidState();\n    });\n});